<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!--Esta vista incluye la adiciÃ³n de los campos faltantes del registro de usuarios-->

    <template id="extended_signup" inherit_id="auth_signup.fields" name="Sign up with added fields">

        <xpath expr="///div[hasclass('field-login')]" position="replace">
            
            <div class="column-content mb-3 field-login">
                <label for="login" class="white_text">Email</label>
                <input type="text" name="login" t-att-value="login" id="login" class="form-control form-control-sm" autofocus="autofocus"
                    autocapitalize="off" required="required" t-att-readonly="'readonly' if only_passwords else None"/>
            </div>
        </xpath>
        <xpath expr="///div[hasclass('field-name')]" position="replace">
            <div class="column-content mb-3 field-name">
                <label for="name" class="white_text">Your Name</label>
                <input type="text" name="name" t-att-value="name" id="name" class="form-control form-control-sm"
                    required="required" t-att-readonly="'readonly' if only_passwords else None"
                    t-att-autofocus="'autofocus' if login and not only_passwords else None" />
            </div>
            <div class="column-content mb-3 field-lastname">
                <label for="last_name" class="white_text">Last name</label>
                <input type="text" name="last_name" t-att-value="last_name" id="last_name" class="form-control form-control-sm" autofocus="autofocus"
                    autocapitalize="off" required="required" t-att-readonly="'readonly' if only_passwords else None"/>
            </div>
            <div class="column-content mb-3 field-country">
                <label for="country_id" class="white_text">Country</label>
                <select name="country_id" id="country_id" class="form-control">
                    <option value="">Country...</option>
                    <t t-foreach="countries or []" t-as="country">
                        <option t-att-value="country.id" t-att-selected="'selected' if country.id == selected_country else ''">
                            <t t-esc="country.name"/>
                        </option>
                    </t>
                </select>
            </div> 
            <div class="column-content mb-3 field-city">
                <label for="city" class="white_text">City</label>
                <input type="text" name="city" t-att-value="city" id="city" class="form-control form-control-sm" autofocus="autofocus"
                    autocapitalize="off" required="required" t-att-readonly="'readonly' if only_passwords else None"/>
            </div>

            <div class="column-content mb-3 field-phone">
                <label for="phone" class="white_text">Phone number</label>
                <input type="text" name="phone" t-att-value="phone" id="phone" class="form-control form-control-sm" autofocus="autofocus"
                    autocapitalize="off" required="required" t-att-readonly="'readonly' if only_passwords else None"/>
            </div>
        </xpath>
        <xpath expr="///div[hasclass('field-phone')]" position="after">
            
            <div class="column-content mb-3 field-gender">
                <label for="gender" class="white_text">Gender</label>
                <input type="text" name="gender" t-att-value="gender" id="gender" class="form-control form-control-sm" autofocus="autofocus"
                    autocapitalize="off" required="required" t-att-readonly="'readonly' if only_passwords else None"/>
            </div>
            <div class="column-content mb-3 field-linkedIn">
                <label for="linkedIn" class="white_text">LinkedIn</label>
                <input type="text" name="linkedIn" t-att-value="linkedIn" id="linkedIn" class="form-control form-control-sm" autofocus="autofocus"
                    autocapitalize="off" required="required" t-att-readonly="'readonly' if only_passwords else None"/>
            </div>
            <div class="column-content mb-3 field-is_lecturer">
                <label for="is_lecturer" class="white_text">
                    <input type="checkbox" name="is_lecturer" class="custom-control-input "/>
                    I am a lecturer</label>
            </div>
            <div class="column-content mb-3 field-recruitment">
                <label for="recruitment" class="white_text">Do you want to be contacted for recruitment processes?</label>
                <select class="form-control" name="recruitment" id="recruitment">
                    <option t-attf-value="yes">Yes</option>
                    <option t-attf-value="no">No</option>
              </select>
            </div>
            <div class="column-content mb-3 field-agreement">
                <label for="policy_agreement" class="white_text">
                    <input type="checkbox" name="policy_agreement" class="custom-control-input " required="required"/>
                    I agree to the privacy policy</label>
            </div>
        </xpath>
        
        <xpath expr="///div[hasclass('field-password')]" position="replace">
            <div class="column-content mb-3 field-password pt-2">
                <label for="password" class="white_text">Password</label>
                <input type="password" name="password" id="password" class="form-control form-control-sm"
                    required="required" t-att-autofocus="'autofocus' if only_passwords else None"/>
            </div>
        </xpath>
        <xpath expr="///div[hasclass('field-confirm_password')]" position="replace">
            <div class="column-content mb-3 field-confirm_password">
                <label for="confirm_password" class="white_text">Confirm Password</label>
                <input type="password" name="confirm_password" id="confirm_password" class="form-control form-control-sm" required="required"/>
            </div>
        </xpath>
    </template>


    <template id="extended_signup_button" inherit_id="auth_signup.signup" name="New sign up button">
        <xpath expr="//form[hasclass('oe_signup_form')]" position="replace">

            <form class="" role="form" method="post" t-if="not message">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>

                <div class="column-display">
                    <t t-call="auth_signup.fields">
                        <t t-set="only_passwords" t-value="bool(token and not invalid_token)"/>
                    </t>
                  </div>

                  <p class="alert alert-danger" t-if="error" role="alert">
                      <t t-esc="error"/>
                  </p>
                  <input type="hidden" name="redirect" t-att-value="redirect"/>
                  <input type="hidden" name="token" t-att-value="token"/>
                  <div class="oe_signup_form text-center oe_login_buttons d-grid pt-3">
                      <button type="submit" class="btn btn-primary big_button_login_signup"> Sign up</button>
                      <a t-attf-href="/web/login?{{ keep_query() }}" class="btn btn-link btn-sm" role="button">Already have an account?</a>
                      <div class="o_login_auth"/>
                  </div>
              </form>
            
        </xpath>

    </template>



    
</odoo>